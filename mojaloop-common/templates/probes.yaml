{{/*
  Mojaloop Common template for Kubernetes readiness and liveness probe configuration.
  Usage: {{- include "mojaloop-common.probes" . | nindent 10 }}
*/}}
{{- define "mojaloop-common.probes" -}}
{{- if .Values.readinessProbe.enabled }}
readinessProbe:
    httpGet:
        path: {{ .Values.readinessProbe.httpGet.path }}
        port: {{ .Values.service.internalPort }}
    initialDelaySeconds: {{ .Values.readinessProbe.initialDelaySeconds }}
    periodSeconds: {{ .Values.readinessProbe.periodSeconds }}
    {{ if .Values.readinessProbe.timeoutSeconds }}timeoutSeconds: {{ .Values.readinessProbe.timeoutSeconds }}{{ end }}
    {{ if .Values.readinessProbe.successThreshold }}successThreshold: {{ .Values.readinessProbe.successThreshold }}{{ end }}
    {{ if .Values.readinessProbe.failureThreshold }}failureThreshold: {{ .Values.readinessProbe.failureThreshold }}{{ end }}
{{- end }}
{{- if .Values.livenessProbe.enabled }}
livenessProbe:
    httpGet:
        path: {{ .Values.livenessProbe.httpGet.path }}
        port: {{ .Values.service.internalPort }}
    initialDelaySeconds: {{ .Values.livenessProbe.initialDelaySeconds }}
    periodSeconds: {{ .Values.livenessProbe.periodSeconds }}
    {{ if .Values.livenessProbe.timeoutSeconds }}timeoutSeconds: {{ .Values.livenessProbe.timeoutSeconds }}{{ end }}
    {{ if .Values.livenessProbe.successThreshold }}successThreshold: {{ .Values.livenessProbe.successThreshold }}{{ end }}
    {{ if .Values.livenessProbe.failureThreshold }}failureThreshold: {{ .Values.livenessProbe.failureThreshold }}{{ end }}
{{- end }}
{{- end }}
