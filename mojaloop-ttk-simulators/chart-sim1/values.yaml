# This is a YAML-formatted file.

sdk-scheme-adapter:
  enabled: true

  sdk-scheme-adapter-api-svc:
    enabled: true
    nameOverride: 'ml-ttk-sim1-sdk-api-svc'
    env:
      DFSP_ID: 'ml-ttk-sim1'
      BACKEND_EVENT_CONSUMER_GROUP_ID: 'ml-ttk-sim1-domain_events_consumer_api_svc_backend_group'
      FSPIOP_EVENT_CONSUMER_GROUP_ID: 'ml-ttk-sim1-domain_events_consumer_api_svc_fspiop_group'
      BACKEND_EVENT_CONSUMER_TOPICS: 'ml-ttk-sim1-topic-sdk-outbound-domain-events'
      BACKEND_EVENT_PRODUCER_TOPIC: 'ml-ttk-sim1-topic-sdk-outbound-domain-events'
      FSPIOP_EVENT_CONSUMER_TOPICS: 'ml-ttk-sim1-topic-sdk-outbound-domain-events'
      FSPIOP_EVENT_PRODUCER_TOPIC: 'ml-ttk-sim1-topic-sdk-outbound-domain-events'
      BACKEND_ENDPOINT: '{{ .Release.Name }}-ml-ttk-sim1-ttk-backend:4040'

  sdk-scheme-adapter-dom-evt-handler:
    enabled: true
    nameOverride: 'ml-ttk-sim1-sdk-dom-evt-handler'
    env:
      DOMAIN_EVENT_CONSUMER_GROUP_ID: 'ml-ttk-sim1-domain_events_consumer_group'
      DOMAIN_EVENT_CONSUMER_TOPICS: 'ml-ttk-sim1-topic-sdk-outbound-domain-events'
      COMMAND_EVENT_PRODUCER_TOPIC: 'ml-ttk-sim1-topic-sdk-outbound-command-events'
  sdk-scheme-adapter-cmd-evt-handler:
    enabled: true
    nameOverride: 'ml-ttk-sim1-sdk-cmd-evt-handler'
    env:
      COMMAND_EVENT_CONSUMER_GROUP_ID: 'ml-ttk-sim1-command_events_consumer_group'
      COMMAND_EVENT_CONSUMER_TOPICS: 'ml-ttk-sim1-topic-sdk-outbound-command-events'
      DOMAIN_EVENT_PRODUCER_TOPIC: 'ml-ttk-sim1-topic-sdk-outbound-domain-events'

ml-testing-toolkit:
  enabled: true

  mysql:
    ## repo and documentation https://github.com/helm/charts/tree/master/stable/percona-xtradb-cluster
    ## disable when connection-manager-backend is disabled
    enabled: false

  ml-testing-toolkit-backend:
    enabled: true
    nameOverride: 'ml-ttk-sim1-ttk-backend'
    config:
      user_config.json:
        CALLBACK_ENDPOINT: 'http://$release_name-ml-ttk-sim1-sdk-api-svc:4001'
      system_config.json: {
        "API_DEFINITIONS": [
          {
            "type": "mojaloop_simulator_inbound",
            "version": "1.4",
            "folderPath": "mojaloop_simulator_sim_1.4"
          },
          {
            "type": "scheme_adapter_outbound",
            "version": "1.0",
            "folderPath": "mojaloop_sdk_outbound_scheme_adapter_1.0",
            "hostnames": [],
            "prefix": "/sdk-out"
          }
        ]
      }
      rules_response__default.json: 'https://raw.githubusercontent.com/mojaloop/sdk-scheme-adapter/mvp/feat/%232809-local-end-to-end-func-tests/test/func/config/ml-testing-toolkit/spec_files/rules_response/default.json'
      api_definitions__mojaloop_simulator_sim_1.4__api_spec.yaml: 'https://raw.githubusercontent.com/mojaloop/sdk-scheme-adapter/mvp/feat/%232809-local-end-to-end-func-tests/test/func/config/ml-testing-toolkit/spec_files/api_definitions/mojaloop_simulator_sim_1.4/api_spec.yaml'
      api_definitions__mojaloop_sdk_outbound_scheme_adapter_1.0__api_spec.yaml: 'https://raw.githubusercontent.com/mojaloop/sdk-scheme-adapter/mvp/feat/%232809-local-end-to-end-func-tests/test/func/config/ml-testing-toolkit/spec_files/api_definitions/mojaloop_sdk_outbound_scheme_adapter_1.0/api_spec.yaml'
  #   ingress:
  #     enabled: true
  #     hosts:
  #       specApi:
  #         host: ml-testing-toolkit-specapi.local
  #       adminApi:
  #         host: ml-testing-toolkit.local
  #   extraEnvironments:
  #     ml-default-environment.json: {
  #       "inputValues": {
  #         "VAR1": "VALUE1"
  #       }
  #     }

  ml-testing-toolkit-frontend:
    enabled: true
    nameOverride: 'ml-ttk-sim1-ttk-frontend'
  #   ingress:
  #     enabled: true
  #     hosts:
  #       ui:
  #         host: ml-testing-toolkit.local
  #   config:
  #     API_BASE_URL: http://ml-testing-toolkit.local
