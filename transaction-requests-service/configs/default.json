{{- $centralServicesHost := ( .Values.config.central_services_host | replace "$release_name" .Release.Name ) -}}
{
  "PORT": {{ .Values.service.ports.api.internalPort }},
  "ENDPOINT_CACHE_CONFIG": {
    "expiresIn": 180000,
    "generateTimeout": 30000
  },
  "SWITCH_ENDPOINT": "http://{{ (default .Values.config.central_services_host $centralServicesHost) }}:{{ .Values.config.central_services_port }}",
  "ERROR_HANDLING": {
    "includeCauseExtension": {{ .Values.error_handling.include_cause_extension}},
    "truncateExtensions": {{ .Values.error_handling.truncate_extensions }}
  },
  "SIDECAR": {
    "DISABLED": {{ .Values.config.forensicloggingsidecar_disabled  }},
    "HOST": "{{ printf "%s-%s" .Release.Name .Values.config.forensicloggingsidecar_host }}",
    "PORT": {{ .Values.config.forensicloggingsidecar_port }},
    "CONNECT_TIMEOUT": 45000,
    "RECONNECT_INTERVAL": 5000
  },
  "INSTRUMENTATION": {
    "METRICS": {
      "DISABLED": {{ not .Values.metrics.enabled }},
      "labels": {
        "eventId": "*"
      },
      "config": {
        "timeout": {{ .Values.metrics.config.timeout }},
        "prefix": {{ .Values.metrics.config.prefix | quote }},
        "defaultLabels": {
        {{- range $key, $value := .Values.metrics.config.defaultLabels }}
        {{ $key  | quote }}: {{ $value | quote }}
        {{- end }}
        }
      }
    }
  }
}