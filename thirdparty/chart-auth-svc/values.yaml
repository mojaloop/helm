enabled: true
replicaCount: 1
image:
  repository: mojaloop/auth-service
  tag: v11.8.2
  # TODO: change me!
  # command: ["/bin/sh", "-c", "--" ]
  command: '[ "tail", "-f", "/dev/null" ]'
  pullPolicy: IfNotPresent


## Pod scheduling preferences.
## ref: https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#affinity-and-anti-affinity
affinity: {}

## Node labels for pod assignment
## ref: https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#nodeselector
nodeSelector: {}

## Set toleration for scheduler
## ref: https://kubernetes.io/docs/concepts/configuration/taint-and-toleration/
tolerations: []

livenessProbe:
  initialDelaySeconds: 30
  httpGet:
    path: /health
    port: 4004
readinessProbe:
  initialDelaySeconds: 30
  httpGet:
    path: /health
    port: 4004

# Add exta environment variables here
env:
  - name: NODE_ENV
    value: production
  - name: LOG_LEVEL
    value: debug

config:
  # TODO: copy this in!
  production.json: {
    "hello": true, 
  }

service:
  type: ClusterIP
  ports:
    name: api
    externalPort: 4004
    internalPort: 4004

ingress:
  enabled: false
  # Used to create an Ingress record.
  hosts:
    host: auth-service.local
    port: 4004
    paths: ['/']

  annotations:
    nginx.ingress.kubernetes.io/proxy-body-size: 8m
    ## https://kubernetes.github.io/ingress-nginx/examples/rewrite/
    # nginx.ingress.kubernetes.io/rewrite-target: '/'
    # nginx.ingress.kubernetes.io/rewrite-target: '/$2'
    ## https://kubernetes.github.io/ingress-nginx/user-guide/multiple-ingress/
    # kubernetes.io/ingress.class: nginx
    ## https://kubernetes.github.io/ingress-nginx/user-guide/tls/#automated-certificate-management-with-kube-lego
    # kubernetes.io/tls-acme: "true"
  tls: []
