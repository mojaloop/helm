# Default values for ml-api-adapter.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.
replicaCount: 1
image:
  repository: mojaloop/ml-testing-toolkit
  tag: v11.2.3
  commandPersistence: '["sh", "-c", "cd /opt/mojaloop-testing-toolkit; if [ -d /opt/ttk-data ]; then if [ ! -d /opt/ttk-data/spec_files ]; then if [ -f /opt/default_config/user_config.json ]; then cp /opt/default_config/user_config.json spec_files; fi; cp -pR spec_files /opt/ttk-data/spec_files; fi; mv spec_files spec_files_default; ln -s /opt/ttk-data/spec_files spec_files; elif [ -f /opt/default_config/user_config.json ]; then cp /opt/default_config/user_config.json spec_files; fi; npm run start;"]'
  command: '["sh", "-c", "cd /opt/mojaloop-testing-toolkit; if [ -f /opt/default_config/user_config.json ]; then cp /opt/default_config/user_config.json spec_files; fi; npm run start;"]'

  # command: '["npm", "run", "start"]'
## Optionally specify an array of imagePullSecrets.
## Secrets must be manually created in the namespace.
## ref: https://kubernetes.io/docs/concepts/containers/images/#specifying-imagepullsecrets-on-a-pod
##
#  imagePullSecrets:
#    - name: myregistrykey
  pullPolicy: Always

## Pod scheduling preferences.
## ref: https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#affinity-and-anti-affinity
affinity: {}

## Node labels for pod assignment
## ref: https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#nodeselector
nodeSelector: {}

## Set toleration for scheduler
## ref: https://kubernetes.io/docs/concepts/configuration/taint-and-toleration/
tolerations: []

readinessProbe:
  enabled: false
  httpGet:
    path: /health
  initialDelaySeconds: 120
  periodSeconds: 15
livenessProbe:
  enabled: false
  httpGet:
    path: /health
  initialDelaySeconds: 90
  periodSeconds: 15

config:
  user_config.json: {
    "VERSION": 1,
    "CALLBACK_ENDPOINT": "http://localhost:4000",
    "CALLBACK_RESOURCE_ENDPOINTS": {
      "enabled": true,
      "endpoints": [
        {
          "method": "put",
          "path": "/parties/{Type}/{ID}",
          "endpoint": "http://moja-account-lookup-service.demo"
        },
        {
          "method": "put",
          "path": "/quotes/{ID}",
          "endpoint": "http://moja-quoting-service.demo"
        },
        {
          "method": "put",
          "path": "/transfers/{ID}",
          "endpoint": "http://moja-ml-api-adapter-service.demo"
        }
      ]
    },
    "HUB_ONLY_MODE": false,
    "ENDPOINTS_DFSP_WISE": {
      "dfsps": {
        "userdfsp": {
          "defaultEndpoint": "http://scheme-adapter:4000",
          "endpoints": []
        },
        "userdfsp2": {
          "defaultEndpoint": "http://scheme-adapter2:4000",
          "endpoints": []
        }
      }
    },
    "SEND_CALLBACK_ENABLE": true,
    "FSPID": "testingtoolkitdfsp",
    "DEFAULT_USER_FSPID": "userdfsp",
    "TRANSFERS_VALIDATION_WITH_PREVIOUS_QUOTES": true,
    "TRANSFERS_VALIDATION_ILP_PACKET": true,
    "TRANSFERS_VALIDATION_CONDITION": true,
    "ILP_SECRET": "secret",
    "VERSIONING_SUPPORT_ENABLE": true,
    "VALIDATE_INBOUND_JWS": false,
    "VALIDATE_INBOUND_PUT_PARTIES_JWS": false,
    "JWS_SIGN": false,
    "JWS_SIGN_PUT_PARTIES": false,
    "CONNECTION_MANAGER_API_URL": "http://localhost:5061",
    "CONNECTION_MANAGER_AUTH_ENABLED": false,
    "CONNECTION_MANAGER_HUB_USERNAME": "hub",
    "CONNECTION_MANAGER_HUB_PASSWORD": "hub",
    "INBOUND_MUTUAL_TLS_ENABLED": false,
    "OUTBOUND_MUTUAL_TLS_ENABLED": false,
    "ADVANCED_FEATURES_ENABLED": true,
    "CALLBACK_TIMEOUT": 10000
  }

extraEnvironments: {
  "hub-k8s-local-environment.json": {
    "inputValues": {
      "fromIdType": "MSISDN",
      "fromIdValue": "44123456789",
      "fromFirstName": "Firstname-Test",
      "fromLastName": "Lastname-Test",
      "fromDOB": "1984-01-01",
      "note": "test",
      "currency": "USD",
      "amount": "100",
      "homeTransactionId": "123ABC",
      "fromFspId": "testingtoolkitdfsp",
      "accept": "application/vnd.interoperability.parties+json;version=1.0",
      "contentType": "application/vnd.interoperability.parties+json;version=1.0",
      "toIdValue": "27713803912",
      "toIdType": "MSISDN",
      "toFspId": "payeefsp",
      "acceptQuotes": "application/vnd.interoperability.quotes+json;version=1.0",
      "contentTypeQuotes": "application/vnd.interoperability.quotes+json;version=1.0",
      "acceptTransfers": "application/vnd.interoperability.transfers+json;version=1.0",
      "contentTransfers": "application/vnd.interoperability.transfers+json;version=1.0",
      "hub_operator": "NOT_APPLICABLE",
      "payerfsp": "testingtoolkitdfsp",
      "accountId": "6",
      "payeefsp": "payeefsp",
      "receiverMSISDN": "27713803912",
      "ilpPacket": "AYIDBQAAAAAAACcQJGcucGF5ZWVmc3AubXNpc2RuLnt7cmVjZWl2ZXJtc2lzZG59fYIC1GV5SjBjbUZ1YzJGamRHbHZia2xrSWpvaVptVXhNREU0Wm1NdE1EaGxZeTAwWWpJM0xUbGpZalF0TnpjMk9URTFNR00zT1dKaklpd2ljWFZ2ZEdWSlpDSTZJbVpsTVRBeE9HWmpMVEE0WldNdE5HSXlOeTA1WTJJMExUYzNOamt4TlRCak56bGlZeUlzSW5CaGVXVmxJanA3SW5CaGNuUjVTV1JKYm1adklqcDdJbkJoY25SNVNXUlVlWEJsSWpvaVRWTkpVMFJPSWl3aWNHRnlkSGxKWkdWdWRHbG1hV1Z5SWpvaWUzdHlaV05sYVhabGNrMVRTVk5FVG4xOUlpd2labk53U1dRaU9pSndZWGxsWldaemNDSjlmU3dpY0dGNVpYSWlPbnNpY0dGeWRIbEpaRWx1Wm04aU9uc2ljR0Z5ZEhsSlpGUjVjR1VpT2lKTlUwbFRSRTRpTENKd1lYSjBlVWxrWlc1MGFXWnBaWElpT2lJeU56Y3hNemd3TXprd05TSXNJbVp6Y0Vsa0lqb2ljR0Y1WlhKbWMzQWlmU3dpY0dWeWMyOXVZV3hKYm1adklqcDdJbU52YlhCc1pYaE9ZVzFsSWpwN0ltWnBjbk4wVG1GdFpTSTZJazFoZEhNaUxDSnNZWE4wVG1GdFpTSTZJa2hoWjIxaGJpSjlMQ0prWVhSbFQyWkNhWEowYUNJNklqRTVPRE10TVRBdE1qVWlmWDBzSW1GdGIzVnVkQ0k2ZXlKaGJXOTFiblFpT2lJeE1EQWlMQ0pqZFhKeVpXNWplU0k2SWxWVFJDSjlMQ0owY21GdWMyRmpkR2x2YmxSNWNHVWlPbnNpYzJObGJtRnlhVzhpT2lKVVVrRk9VMFpGVWlJc0ltbHVhWFJwWVhSdmNpSTZJbEJCV1VWU0lpd2lhVzVwZEdsaGRHOXlWSGx3WlNJNklrTlBUbE5WVFVWU0luMTkA",
      "condition": "n2cwS3w4ekGlvNYoXg2uBAqssu3FCoXjADE2mziU5jU",
      "validFulfillment": "UNlJ98hZTY_dsw0cAqw4i_UN3v4utt7CZFB4yfLbVFA",
      "validCondition": "GRzLaTP7DJ9t4P-a_BA0WA9wzzlsugf00-Tn6kESAfM",
      "invalidFulfillment": "_3cco-YN5OGpRKVWV3n6x6uNpBTH9tYUdOYmHA-----",
      "fspiopSignature": "{\"signature\":\"iU4GBXSfY8twZMj1zXX1CTe3LDO8Zvgui53icrriBxCUF_wltQmnjgWLWI4ZUEueVeOeTbDPBZazpBWYvBYpl5WJSUoXi14nVlangcsmu2vYkQUPmHtjOW-yb2ng6_aPfwd7oHLWrWzcsjTF-S4dW7GZRPHEbY_qCOhEwmmMOnE1FWF1OLvP0dM0r4y7FlnrZNhmuVIFhk_pMbEC44rtQmMFv4pm4EVGqmIm3eyXz0GkX8q_O1kGBoyIeV_P6RRcZ0nL6YUVMhPFSLJo6CIhL2zPm54Qdl2nVzDFWn_shVyV0Cl5vpcMJxJ--O_Zcbmpv6lxqDdygTC782Ob3CNMvg\\\",\\\"protectedHeader\\\":\\\"eyJhbGciOiJSUzI1NiIsIkZTUElPUC1VUkkiOiIvdHJhbnNmZXJzIiwiRlNQSU9QLUhUVFAtTWV0aG9kIjoiUE9TVCIsIkZTUElPUC1Tb3VyY2UiOiJPTUwiLCJGU1BJT1AtRGVzdGluYXRpb24iOiJNVE5Nb2JpbGVNb25leSIsIkRhdGUiOiIifQ\"}",
      "HUB_OPERATOR_BEARER_TOKEN": "NOT_APPLICABLE",
      "BASE_CENTRAL_LEDGER_ADMIN": "",
      "HOST_ML_API_ADAPTER": "http://moja-ml-api-adapter-service.demo",
      "HOST_CENTRAL_LEDGER": "http://moja-centralledger-service.demo",
      "HOST_QUOTING_SERVICE": "http://moja-quoting-service.demo",
      "HOST_ACCOUNT_LOOKUP_SERVICE": "http://moja-account-lookup-service.demo",
      "HOST_ACCOUNT_LOOKUP_SERVICE_ADMIN": "http://moja-account-lookup-service-admin.demo",
      "HOST_ACCOUNT_LOOKUP_ADMIN": "http://moja-account-lookup-service-admin.demo",
      "HOST_SIMULATOR": "http://moja-simulator.demo",
      "HOST_CENTRAL_SETTLEMENT": "http://moja-centralsettlement.demo/v1",
      "HOST_TRANSACTION_REQUESTS_SERVICE": "http://moja-transaction-requests-service.demo",
      "CALLBACK_ENDPOINT_BASE_URL": "http://test1-ml-testing-toolkit-backend.ttk:5000",
      "payerIdType": "MSISDN",
      "payerIdentifier": "17039811907",
      "payerfspEmail": "some.email@gmail.com",
      "payeeIdType": "MSISDN",
      "payeeIdentifier": "17039811907",
      "payeefspEmail": "some.email@gmail.com",
      "testfsp1IdType": "MSISDN",
      "testfsp1Identifier": "17039811907",
      "testfsp1Email": "some.email@gmail.com",
      "testfsp2IdType": "MSISDN",
      "testfsp2Identifier": "17039811907",
      "testfsp2Email": "some.email@gmail.com",
      "hubEmail": "some.email@gmail.com",
      "HOST_BULK_ADAPTER": "http://dev1-bulk-api-adapter.mojaloop.live",
      "HOST_LEGACY_SIMULATOR": "http://dev1-simulator.mojaloop.live",
      "validCondition2": "kPLCKM62VY2jbekuw3apCTBg5zk_mVs9DD8-XpljQms",
      "validIlpPacket2": "AYIC9AAAAAAAABdwHWcucGF5ZWVmc3AubXNpc2RuLjIyNTU2OTk5MTI1ggLKZXlKMGNtRnVjMkZqZEdsdmJrbGtJam9pWmpRMFltUmtOV010WXpreE1DMDBZVGt3TFRoa05qa3RaR0ppWVRaaVl6aGxZVFpqSWl3aWNYVnZkR1ZKWkNJNklqVTBaRFZtTURsaUxXRTBOMlF0TkRCa05pMWhZVEEzTFdFNVkyWXpZbUl5TkRsaFpDSXNJbkJoZVdWbElqcDdJbkJoY25SNVNXUkpibVp2SWpwN0luQmhjblI1U1dSVWVYQmxJam9pVFZOSlUwUk9JaXdpY0dGeWRIbEpaR1Z1ZEdsbWFXVnlJam9pTWpJMU5UWTVPVGt4TWpVaUxDSm1jM0JKWkNJNkluQmhlV1ZsWm5Od0luMTlMQ0p3WVhsbGNpSTZleUp3WVhKMGVVbGtTVzVtYnlJNmV5SndZWEowZVVsa1ZIbHdaU0k2SWsxVFNWTkVUaUlzSW5CaGNuUjVTV1JsYm5ScFptbGxjaUk2SWpJeU5UQTNNREE0TVRneElpd2labk53U1dRaU9pSndZWGxsY21aemNDSjlMQ0p3WlhKemIyNWhiRWx1Wm04aU9uc2lZMjl0Y0d4bGVFNWhiV1VpT25zaVptbHljM1JPWVcxbElqb2lUV0YwY3lJc0lteGhjM1JPWVcxbElqb2lTR0ZuYldGdUluMHNJbVJoZEdWUFprSnBjblJvSWpvaU1UazRNeTB4TUMweU5TSjlmU3dpWVcxdmRXNTBJanA3SW1GdGIzVnVkQ0k2SWpZd0lpd2lZM1Z5Y21WdVkza2lPaUpWVTBRaWZTd2lkSEpoYm5OaFkzUnBiMjVVZVhCbElqcDdJbk5qWlc1aGNtbHZJam9pVkZKQlRsTkdSVklpTENKcGJtbDBhV0YwYjNJaU9pSlFRVmxGVWlJc0ltbHVhWFJwWVhSdmNsUjVjR1VpT2lKRFQwNVRWVTFGVWlKOWZRAA",
      "currency2": "USD",
      "PAYERFSP_SDK_TESTAPI_URL": "http://dev1-sim-payerfsp.mojaloop.live/sim/payerfsp/sdktest",
      "PAYEEFSP_SDK_TESTAPI_URL": "http://dev1-sim-payeefsp.mojaloop.live/sim/payeefsp/sdktest",
      "TESTFSP1_SDK_TESTAPI_URL": "http://dev1-sim-testfsp1.mojaloop.live/sim/testfsp1/sdktest",
      "TESTFSP2_SDK_TESTAPI_URL": "http://dev1-sim-testfsp2.mojaloop.live/sim/testfsp2/sdktest",
      "PAYERFSP_BACKEND_TESTAPI_URL": "http://dev1-sim-payerfsp.mojaloop.live/sim/payerfsp/test",
      "PAYEEFSP_BACKEND_TESTAPI_URL": "http://dev1-sim-payeefsp.mojaloop.live/sim/payeefsp/test",
      "TESTFSP1_BACKEND_TESTAPI_URL": "http://dev1-sim-testfsp1.mojaloop.live/sim/testfsp1/test",
      "TESTFSP2_BACKEND_TESTAPI_URL": "http://dev1-sim-testfsp2.mojaloop.live/sim/testfsp2/test",
      "PAYERFSP_CALLBACK_URL": "http://dev1-sim-payerfsp.mojaloop.live/sim/payerfsp/inbound",
      "PAYEEFSP_CALLBACK_URL": "http://dev1-sim-payeefsp.mojaloop.live/sim/payeefsp/inbound",
      "TESTFSP1_CALLBACK_URL": "http://dev1-sim-testfsp1.mojaloop.live/sim/testfsp1/inbound",
      "TESTFSP2_CALLBACK_URL": "http://dev1-sim-testfsp2.mojaloop.live/sim/testfsp2/inbound",
      "acceptParticipants": "application/vnd.interoperability.participants+json;version=1.0",
      "contentTypeParticipants": "application/vnd.interoperability.participants+json;version=1.0",
      "toIdValueDelete": "27713803913",
      "batchToIdValue1": "27713803066",
      "batchToIdValue2": "27713803067",
      "invalidToIdType": "ACCOUNT_ID",
      "invalidToIdValue": "27713803099"
    }
  }
}



service:
  type: ClusterIP
  specApi:
    name: spec-api
    externalPort: 5000
    internalPort: 5000
  adminApi:
    name: admin-api
    externalPort: 5050
    internalPort: 5050


ingress:
  enabled: true
  externalPath: /
  # Used to create an Ingress record.
  hosts:
    specApi: testing-toolkit-specapi.local
    adminApi: testing-toolkit-adminapi.local

  annotations:
    nginx.ingress.kubernetes.io/rewrite-target: '/'
    # kubernetes.io/ingress.class: nginx
    # kubernetes.io/tls-acme: "true"
  tls:
    # Secrets must be manually created in the namespace.
    # - secretName: chart-example-tls
    #   hosts:
    #     - chart-example.local
resources: {}
  # We usually recommend not to specify default resources and to leave this as a conscious
  # choice for the user. This also increases chances charts run on environments with little
  # resources, such as Minikube. If you do want to specify resources, uncomment the following
  # lines, adjust them as necessary, and remove the curly braces after 'resources:'.
  # limits:
  #  cpu: 100m
  #  memory: 128Mi
  # requests:
  #  cpu: 100m
  #  memory: 128Mi

## Persist data to a persistent volume
persistence:
  enabled: false
  ## percona data Persistent Volume Storage Class
  ## If defined, storageClassName: <storageClass>
  ## If set to "-", storageClassName: "", which disables dynamic provisioning
  ## If undefined (the default) or set to null, no storageClassName spec is
  ##   set, choosing the default provisioner.  (gp2 on AWS, standard on
  ##   GKE, AWS & OpenStack)
  ##
  # storageClass: "-"
  accessMode: ReadWriteOnce
  size: 1Gi


